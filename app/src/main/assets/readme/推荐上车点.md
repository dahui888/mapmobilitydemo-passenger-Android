## 概述

推荐上车点SDK，是针对于出行场景（推荐上车点）开发的SDK。该产品能够进行用户周边不同推荐上车点展示，力求提供用户更优质的出行体验。

## 快速接入

一、配置key

在工程的AndroidManifest.xml文件中添加推荐上车点所需的key

```java

        <!-- 也只需注册com.tencent.map.recospot.api_key，大型枢纽的key默认会使用这个-->
        <meta-data
            android:name="com.tencent.map.recospot.api_key"
            android:value="fcebca0fce22a2a47dfabc30c639f1f9"
            />
        <meta-data
            android:name="com.tencent.map.subhub.api.key"
            android:value="MGEBZ-UZ6RD-TDI4I-HEQ3B-IFRLS-2QFWJ"
            />
        <meta-data
            android:name="com.tencent.map.hub.api.key"
            android:value="MGEBZ-UZ6RD-TDI4I-HEQ3B-IFRLS-2QFWJ"
            />
```

因推荐上车点SDK需要使用检索SDK，所以需要在使用时配置检索SDK的key

```java
        <!-- 也只需注册 com.tencent.map.geo.api.key，逆地理编码默认会使用这个-->
        <meta-data
            android:name="com.tencent.map.geo.api.key"
            android:value="D22BZ-7RHWJ-4GRFU-FNQXN-J7UE7-SWFRU"
            />
        <meta-data
            android:name="com.tencent.map.regeo.api.key"
            android:value="gmXVXmhoW1UJeEfGMQTkSMC2ouz6KpBd"
            />
```

二、推荐上车点展示初始化

```java

1. 创建manager

	      pickupSpotManager = new TMMRecommendedBoardManager(TencentMap mTencentMap);
        TMMRecommendedBoardManager.mContext = this;

2. 配置推荐上车点所需要信息

         /**
          *设置上⻋点允许获取和显示的最小地图缩放级别，默认16
          *是否进行吸附，默认true
          *上⻋点自动吸附距离阈值，<此值自动吸附，单位m，默认50
          *是否展示交通枢纽，包括画矩形围栏、吐二级枢纽数据
          *是否使用默认的推荐上车点UI
          *是否打开默认的加载动画
          */
        pickupSpotManager.getManagerConfig()
                .isRecommendSpotDefaultUI(true)
                .isAbsorbed(true);
          /**
          *设置请求上车点的个数
          *经纬度
          */
        pickupSpotManager.getBoardOption().;
         /**
          *设置R.drawable.xxx,推荐上⻋点的原点图片
          *上车点字体大小，单位sp，默认值12sp
          *上车点颜色，16进制值
          *推荐上⻋点文字边界宽度，单位dp，默认1dp
          *上车点边界颜色
          *圆点与文字间的距离
          *大型枢纽的块颜色
          *大型枢纽的边颜色
          *大型枢纽的边宽度
          *每行的最大字数，超过换行
          */
        pickupSpotManager.getUiStyle().;
        
3. 关联地图移动监听

  mTencentMap.setOnCameraChangeListener(new TencentMap.OnCameraChangeListener() {
            @Override
            public void onCameraChange(CameraPosition cameraPosition) {
                pickupSpotManager.onCamerChangeListener(cameraPosition);
            }

            @Override
            public void onCameraChangeFinished(CameraPosition cameraPosition) {
                pickupSpotManager.onCameraChangeFinish(cameraPosition);
            }
        });
        
4. 获取推荐上车点或二级枢纽
    /**
     * 获取推荐上车点
     * @param option 参数选项
     */
    public void getRecommendSpot(TMMRecommendedBoardOption option)
    
    /**
     * 获取特定二级枢纽数据
     * @param hubId
     */
    public void getSubHubDataById(String hubId)
    
5.设置回调监听

    /**
     * 推荐上车点请求的监听
     * @param listener
     */
    public void registerRecommendSpotListener(TMMRBDataManager.TMMRecommendedBoardListener listener)
    
    /**
     * 移除推荐上车点请求的监听
     * @param listener
     */
    public void unRegisterRecommendSpotListener(TMMRBDataManager.TMMRecommendedBoardListener listener)
    
    /**
     * 大型枢纽数据请求的监听
     * @param listener
     */
    public void registerTraHubListener(TMMRBDataManager.TMMTransportationHubListener listener)
    
    /**
     * 移除大型枢纽的监听
     */
    public void unRegisterTraHubListener()
    
    /**
     * 添加吸附状态的监听
     * @param listener
     */
    public void setOnAttachRecommendSpotListener(TMMRBDataManager.TMMAttachRecommendSpotListener listener)
    
    /**
     * 移除吸附状态的监听
     */
    public void removeAttachRecommendSpotListener()
    
    /**
     * 注册二级枢纽数据的结果监听
     * @param listener
     */
    public void registerSubHubListener(TMMRBDataManager.TMMSubHubListener listener)
    
     /**
     * 移除二级枢纽数据的结果监听
     */
    public void removeSubListener() 
    
    /**
     * 注册大头针加载动画的状态监听
     */
    public void setPointAnimaListener(TMMPointAnimaListener listener)

6.跳动大头针

    <com.tencent.recommendspot.ui.PointMarkerView
        android:id="@+id/point_marker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        />

```